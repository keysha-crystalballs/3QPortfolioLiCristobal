<!DOCTYPE html>
<html>
<head>
<style>

input:focus {
  background-color: #F9D689;
}

.error {
    border: 2px solid red;
    background-color: #ffe6e6;
}

legend {
  font-family: fantasy;
  font-weight: bold;
  font-size: 24px;
}

fieldset {
  background-color: #f4e1b8;
}

a {
  color:#e7ba5a;
  font-family: fantasy;
  font-weight: bold;
  font-size: larger;
}

</style>
</head>

<body>

<header><a href="../index.html">Home</a></header>

<p> Hello! Please register. </p>

<form 
      id="login"
      method="post"
      onsubmit="return confirmSubmit()"
      onreset="return confirmReset()"
>

<fieldset>

            <legend>Student Registration: </legend>

            <label for="studentId">Student Id:</label>

            <input type="number" id="studentId" name="studentId" required onblur="checkEmpty(this)"><br><br>

            <label for="fullName">Full Name:</label>

            <input type="text" id="fullName" name="fullName" required onblur="checkEmpty(this)"><br><br>
            
            <label for="bday"> Birthday: </label>
            
            <input type="date" id="bday" name="bday" required><br><br>
            
            <label for="emailAd">Email Address:</label>
            
            <input type="email" id="emailAd" name="emailAd" required onblur="checkEmpty(this)"><br><br>

 </fieldset>
 
 <br><br>

 <fieldset>

            <legend>Additional Information: </legend>

             <label for="mobileNum">Mobile Number:</label>

            <input type="text" id="mobileNum" name="mobileNum" required onblur="checkEmpty(this)"><br><br>

            <label for="gradeLevel">Grade Level:</label>

            <select name="gradeLevel" id="gradeLevel" required>
              
              <option value="">Select</option>

              <option value="7"> Grade 7 </option>

              <option value="8"> Grade 8 </option>

              <option value="9"> Grade 9 </option>

              <option value="10"> Grade 10 </option>
              
              <option value="11"> Grade 11 </option>
              
              <option value="12"> Grade 12 </option>

            </select>
            
            <p> Select Intern or Extern: </p>
            
            <input type="radio" id="intern" name="status" value="intern" required>
            
            <label for="intern"> Intern </label><br>
            
            <input type="radio" id="extern" name="status" value="extern" required>
            
            <label for="extern"> Extern </label><br><br>

            <label for="clubs"> Preferred Organization/Club:</label>

            <select name="clubs" id="clubs" required>
              
              <option value="">Select</option>

              <option value="STEM"> STEM Clubs </option>
              
              <option value="Literature"> Literature Clubs </option>

              <option value="Arts"> Arts & Crafts Clubs </option>

              <option value="Music"> Music & Dancing Clubs </option>
              
              <option value="Sports"> Sports Clubs </option>

            </select>
            
            <br><br>
            
            <label for="join"> Why do you want to join?: </label><br>

            <textarea id="tArea" name="join" rows="4" cols="50" required onblur="checkEmpty(this)"></textarea>

 </fieldset>

 <br><br>

<input type="submit" value="Submit">

<input type="reset" value="Reset">

<button type="button" id="viewSignups">View Sign-Ups</button>

</form>

<script>

const SIGNUPS_KEY = 'studentSignups';

// Function to load existing sign-ups from localStorage
function loadSignups() {
    const raw = localStorage.getItem(SIGNUPS_KEY);
    if (raw) {
        return JSON.parse(raw);
    } else {
        return []; // Initialize empty array if no data
    }
}

// Function to save sign-ups to localStorage
function saveSignups(signups) {
    localStorage.setItem(SIGNUPS_KEY, JSON.stringify(signups));
}

// Get the form element
const form = document.getElementById('login');

// Handle form submission
form.onsubmit = function(event) {
    // Prevent default form submission
    event.preventDefault();
    
    // Confirm submission
    const confirmed = confirm('Do you really want to submit this form?');
    
    if (!confirmed) {
        return false; // user cancels
    }
    
    // Get all values
    const studentID = document.getElementById('studentId').value.trim();
    const fullName = document.getElementById('fullName').value.trim();
    const birthday = document.getElementById('bday').value;
    const email = document.getElementById('emailAd').value.trim();
    const mobilePhone = document.getElementById('mobileNum').value.trim();
    const gradeLevel = document.getElementById('gradeLevel').value;
    
    // Get selected radio button value
    let internExtern = '';
    const internExternRadios = document.getElementsByName('status');
    for (let i = 0; i < internExternRadios.length; i++) {
        if (internExternRadios[i].checked) {
            internExtern = internExternRadios[i].value;
            break;
        }
    }
    
    const club = document.getElementById('clubs').value;
    const reason = document.getElementById('tArea').value.trim();
    
    // Create student object
    const studentData = {
        id: Date.now(), //timestamp
        studentID: studentID,
        fullName: fullName,
        birthday: birthday,
        email: email,
        mobilePhone: mobilePhone,
        gradeLevel: gradeLevel,
        internExtern: internExtern,
        club: club,
        reason: reason,
        timestamp: new Date().toLocaleString() // Record when submitted
    };
    
    // Load existing sign-ups
    const signups = loadSignups();
    
    // Add new student to the array
    signups.push(studentData);
    
    // Save updated array back to localStorage
    saveSignups(signups);
    
    // Show success message
    alert('Registration submitted successfully!');
    
    // Reset the form
    form.reset();
    
    return false; // Prevent actual form submission
};

document.getElementById('viewSignups').onclick = function() {
    // Navigate to the view page
    window.location.href = "./viewSignUps.html";
};

</script>

</body>
</html>