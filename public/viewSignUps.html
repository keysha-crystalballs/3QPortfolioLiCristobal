<!DOCTYPE html>
<html>
<style>
        body {
        font-family: Arial, sans-serif;
        background-color: #fdf5e6;
        padding: 20px;
        color: #333;
    }

    header a {
        color: #e7ba5a;
        font-family: fantasy;
        font-weight: bold;
        font-size: larger;
        text-decoration: none;
    }

    header a:hover {
        text-decoration: underline;
    }

    h2 {
        font-family: fantasy;
        color: #c4933a;
    }

    p {
        font-family: fantasy;
        font-weight: bold;
        font-size: 18px;
    }

    select {
        padding: 6px 10px;
        font-size: 16px;
        border: 2px solid #e7ba5a;
        border-radius: 5px;
        background-color: #fff;
        cursor: pointer;
    }

    select:focus {
        outline: none;
        border-color: #c4933a;
        background-color: #F9D689;
    }

    #totalDisplay {
        font-family: fantasy;
        font-size: 18px;
        color: #c4933a;
        margin-top: 15px;
    }

    /* TABLE STYLES */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        background-color: #f4e1b8;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    thead {
        background-color: #e7ba5a;
    }

    thead th {
        font-family: fantasy;
        font-size: 18px;
        color: #fff;
        padding: 12px 15px;
        text-align: left;
        border-bottom: 3px solid #c4933a;
    }

    tbody tr {
        border-bottom: 1px solid #d4c4a0;
    }

    tbody tr:nth-child(even) {
        background-color: #efe0c4;
    }

    tbody tr:hover {
        background-color: #F9D689;
    }

    tbody td {
        padding: 10px 15px;
        font-size: 15px;
    }

    .no-data {
        font-family: fantasy;
        font-size: 18px;
        color: #c4933a;
        padding: 20px;
        text-align: center;
        background-color: #f4e1b8;
        border-radius: 8px;
        margin-top: 15px;
    }
</style>

<header><a href="./Q3_2GLithiumCristobal.html">Go Back to Sign-ups</a></header>

<p>Select your club: </p>

<select name="clubFilter" id="clubFilter" required>

    <option value="ALL">All Clubs</option>

    <option value="STEM">STEM Clubs</option>

    <option value="Literature">Literature Clubs</option>

    <option value="Arts">Arts &amp; Crafts Clubs</option>

    <option value="Music">Music &amp; Dancing Clubs</option>

    <option value="Sports">Sports Clubs</option>
</select>

<p id="totalDisplay">Total Signup: 0</p>
<div id="tableContainer"></div>

<script>
// localStorage key
const SIGNUPS_KEY = 'studentSignups';

// Function to load sign-ups from localStorage
function loadSignups() {
    const raw = localStorage.getItem(SIGNUPS_KEY);
    if (raw) {
        return JSON.parse(raw);
    } else {
        return [];
    }
}

// Function to escape HTML
function escapeHtml(str) {
    let text = String(str);
    let escaped = "";
    for (let i = 0; i < text.length; i++) {
        let char = text[i];
        if (char === '&') {
            escaped += '&amp;';
        } else if (char === '<') {
            escaped += '&lt;';
        } else if (char === '>') {
            escaped += '&gt;';
        } else if (char === '"') {
            escaped += '&quot;';
        } else if (char === "'") {
            escaped += '&#39;';
        } else {
            escaped += char;
        }
    }
    return escaped;
}

// Function to render the table based on filter
function renderTable(filterClub) {
    // Load all sign-ups
    const allSignups = loadSignups();
    
    // Filter based on selected club
    let filteredSignups = allSignups;
    if (filterClub !== 'ALL') {
        filteredSignups = [];
        for (let i = 0; i < allSignups.length; i++) {
            if (allSignups[i].club === filterClub) {
                filteredSignups.push(allSignups[i]);
            }
        }
    }
    
    // Update total count
    const totalDisplay = document.getElementById('totalDisplay');
    totalDisplay.textContent = 'Total Signup: ' + filteredSignups.length;
    
    // Get container
    const container = document.getElementById('tableContainer');
    
    // Check if there are any sign-ups
    if (filteredSignups.length === 0) {
        // Show appropriate message
        if (filterClub === 'ALL') {
            container.innerHTML = '<div class="no-data">No sign-ups yet. Be the first to register!</div>';
        } else {
            container.innerHTML = '<div class="no-data">No Sign Ups for the club</div>';
        }
        return;
    }
    
    // Build table HTML
    let tableHTML = '<table>';
    tableHTML += '<thead><tr>';
    tableHTML += '<th>Club</th>';
    tableHTML += '<th>ID</th>';
    tableHTML += '<th>Fullname</th>';
    tableHTML += '<th>Grade</th>';
    tableHTML += '<th>Email</th>';
    tableHTML += '<th>Mobile</th>';
    tableHTML += '<th>Intern/Extern</th>';
    tableHTML += '</tr></thead>';
    tableHTML += '<tbody>';
    
    // Add rows for each signup
    for (let i = 0; i < filteredSignups.length; i++) {
        const student = filteredSignups[i];
        tableHTML += '<tr>';
        tableHTML += '<td>' + escapeHtml(student.club) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.studentID) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.fullName) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.gradeLevel) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.email) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.mobilePhone) + '</td>';
        tableHTML += '<td>' + escapeHtml(student.internExtern) + '</td>';
        tableHTML += '</tr>';
    }
    
    tableHTML += '</tbody></table>';
    
    // Insert table into container
    container.innerHTML = tableHTML;
}

// Set up event listener for filter dropdown
document.getElementById('clubFilter').onchange = function() {
    const selectedClub = this.value;
    renderTable(selectedClub);
};

// Initial render - show all sign-ups
renderTable('ALL');
</script>

</html>